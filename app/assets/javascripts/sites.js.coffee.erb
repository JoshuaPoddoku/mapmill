# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/


#Initialize the jQuery File Upload widget:
$('#fileupload').fileupload({
        #Uncomment the following to send cross-domain cookies:
        xhrFields: {withCredentials: true},
        url: $("s3-data").data("url"),
})


#Enable iframe cross-domain access via redirect option:
$('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
)

$('#fileupload').fileupload('option', {
            url: $("s3-data").data("url"),
            #Enable image resizing, except for Android and Opera,
            #which actually support image resizing, but fail to
            #send Blob objects via XHR requests:
            disableImageResize: /Android(?!.*Chrome)|Opera/
                .test(window.navigator.userAgent),
            maxFileSize: 5000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i
        })

